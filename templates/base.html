<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Lung Sound Analysis{% endblock %}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    {% if current_user.is_authenticated %}
    <nav class="top-navbar">
        <div class="logo-section">
            <div class="logo-icon">
                <i class="fas fa-lungs"></i>
            </div>
            <div class="logo-text">
                <strong>Lung<br>Sound<br>Analysis</strong>
            </div>
        </div>
        
        <ul class="nav-menu">
            {% if current_user.role == 'admin' %}
                <!-- Admin Navigation -->
                <li><a href="{{ url_for('admin_dashboard') }}" class="{% if request.endpoint == 'admin_dashboard' %}active{% endif %}">Dashboard</a></li>
                <li><a href="{{ url_for('admin_patients') }}" class="{% if request.endpoint == 'admin_patients' %}active{% endif %}">Manage Patients</a></li>
                <li><a href="{{ url_for('reports') }}" class="{% if request.endpoint == 'reports' %}active{% endif %}">Reports</a></li>
                <li><a href="{{ url_for('clinical_guidelines') }}" class="{% if request.endpoint == 'clinical_guidelines' %}active{% endif %}">Guidelines</a></li>
                <li><a href="{{ url_for('settings') }}" class="{% if request.endpoint == 'settings' %}active{% endif %}">Settings</a></li>
            {% else %}
                <!-- Clinician Navigation -->
                <li><a href="{{ url_for('dashboard') }}" class="{% if request.endpoint == 'dashboard' %}active{% endif %}">Dashboard</a></li>
                <li><a href="{{ url_for('patients_list') }}" class="{% if request.endpoint == 'patients_list' %}active{% endif %}">Patients</a></li>
                <li><a href="{{ url_for('reports') }}" class="{% if request.endpoint == 'reports' %}active{% endif %}">Reports</a></li>
                <li><a href="{{ url_for('clinical_guidelines') }}" class="{% if request.endpoint == 'clinical_guidelines' %}active{% endif %}">Guidelines</a></li>
                <li><a href="{{ url_for('settings') }}" class="{% if request.endpoint == 'settings' %}active{% endif %}">Settings</a></li>
            {% endif %}
        </ul>
        
        <div class="user-section">
            {% if current_user.role == 'admin' %}
            <span style="background: #FFD700; color: #856404; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.75rem; font-weight: 600;">ADMIN</span>
            {% endif %}
            <span class="user-name">{{ current_user.username }}</span>
            <div class="user-avatar">{{ current_user.username[0].upper() }}</div>
            <a href="{{ url_for('logout') }}" style="color: var(--text-light); text-decoration: none;">
                <i class="fas fa-sign-out-alt"></i>
            </a>
        </div>
        
    </nav>
    {% endif %}

    <main>
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div style="margin: 1rem 2rem; padding: 1rem; border-radius: 8px; background: {% if category == 'success' %}#d4edda{% elif category == 'error' %}#f8d7da{% else %}#d1ecf1{% endif %};">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    {% block extra_js %}{% endblock %}
</body>
</html>
