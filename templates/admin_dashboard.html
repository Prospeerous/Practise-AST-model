{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="main-container">
    <div class="page-header">
        <h1><i class="fas fa-user-shield"></i> Admin Dashboard</h1>
        <p class="page-subtitle">System overview and management</p>
    </div>

    <!-- Statistics Cards -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
        <a href="{{ url_for('admin_clinicians') }}" style="text-decoration: none;">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 2rem; border-radius: 12px; color: white; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 20px rgba(102, 126, 234, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                <i class="fas fa-user-md" style="font-size: 2.5rem; margin-bottom: 1rem;"></i>
                <h2 style="margin: 0; font-size: 2.5rem;">{{ total_users }}</h2>
                <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Total Clinicians</p>
            </div>
        </a>

        <a href="{{ url_for('admin_patients') }}" style="text-decoration: none;">
            <div style="background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%); padding: 2rem; border-radius: 12px; color: white; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 20px rgba(74, 144, 226, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                <i class="fas fa-users" style="font-size: 2.5rem; margin-bottom: 1rem;"></i>
                <h2 style="margin: 0; font-size: 2.5rem;">{{ total_patients }}</h2>
                <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Total Patients</p>
            </div>
        </a>

        <a href="{{ url_for('reports') }}" style="text-decoration: none;">
            <div style="background: linear-gradient(135deg, #90EE90 0%, #76c776 100%); padding: 2rem; border-radius: 12px; color: white; cursor: pointer; transition: transform 0.3s, box-shadow 0.3s;" onmouseover="this.style.transform='translateY(-5px)'; this.style.boxShadow='0 8px 20px rgba(144, 238, 144, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                <i class="fas fa-chart-line" style="font-size: 2.5rem; margin-bottom: 1rem;"></i>
                <h2 style="margin: 0; font-size: 2.5rem;">{{ total_analyses }}</h2>
                <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">Total Analyses</p>
            </div>
        </a>
    </div>

    <!-- Quick Actions -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
        <a href="{{ url_for('admin_patients') }}" style="text-decoration: none;">
            <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: transform 0.3s; cursor: pointer;">
                <i class="fas fa-users" style="font-size: 2rem; color: #4A90E2; margin-bottom: 1rem;"></i>
                <h3 style="color: var(--text-dark);">Manage Patients</h3>
                <p style="color: var(--text-light); margin: 0;">View all patients and reassign clinicians</p>
            </div>
        </a>

        <a href="{{ url_for('dashboard') }}" style="text-decoration: none;">
            <div style="background: white; padding: 1.5rem; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: transform 0.3s; cursor: pointer;">
                <i class="fas fa-chart-bar" style="font-size: 2rem; color: #90EE90; margin-bottom: 1rem;"></i>
                <h3 style="color: var(--text-dark);">View All Analyses</h3>
                <p style="color: var(--text-light); margin: 0;">See all system analyses and reports</p>
            </div>
        </a>
    </div>

    <!-- Recent Activity -->
    <div class="recent-section">
        <div class="section-header">
            <h2>Recent System Activity</h2>
        </div>

        <ul class="upload-list">
            {% for analysis in recent_analyses %}
            <li class="upload-item">
                <div class="upload-item-left">
                    <div class="file-icon">
                        <i class="fas fa-file-audio"></i>
                    </div>
                    <div class="file-info">
                        <h4>{{ analysis.audio_file.patient.patient_name }} - {{ analysis.audio_file.filename }}</h4>
                        <p class="file-meta">
                            By Dr. {{ analysis.audio_file.patient.clinician.username }} â€¢ 
                            {{ analysis.analysis_date.strftime('%b %d, %Y at %I:%M %p') }}
                        </p>
                    </div>
                </div>
                <div class="upload-item-right">
                    <span class="status-badge status-complete">{{ analysis.classification }}</span>
                    <button onclick="location.href='{{ url_for('view_results', analysis_id=analysis.id) }}'" 
                            style="margin-left: 1rem; padding: 0.5rem 1rem; background: var(--primary-blue); color: white; border: none; border-radius: 6px; cursor: pointer;">
                        <i class="fas fa-eye"></i> View
                    </button>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}
